{
	"format_version": "1.19.20",
	"minecraft:block": {
		"description": {
			"identifier": "bridge:powered_cable",
			"is_experimental": false,
			"properties": {
				"bridge:north": [
					0,
					1
				],
				"bridge:east": [
					0,
					1
				],
				"bridge:south": [
					0,
					1
				],
				"bridge:west": [
					0,
					1
				],
				"bridge:up": [
					0,
					1
				],
				"bridge:down": [
					0,
					1
				],
				"bridge:cooldown": [
					0,
					1,
					2,
					3,
					4
				],
				"bridge:has_power": [
					1,
					0
				]
			}
		},
		"components": {
			"minecraft:geometry": "geometry.cable",
			"minecraft:material_instances": {
				"*": {
					"texture": "bridge_cable",
					"render_method": "alpha_test"
				}
			},
			"minecraft:collision_box": {
				"origin": [
					-2,
					6,
					-2
				],
				"size": [
					4,
					4,
					4
				]
			},
			"minecraft:breathability": "air",
			"minecraft:block_light_filter": 0,
			"minecraft:part_visibility": {
				"conditions": {
					"north": "query.block_property('bridge:north') == 1",
					"east": "query.block_property('bridge:east') == 1",
					"south": "query.block_property('bridge:south') == 1",
					"west": "query.block_property('bridge:west') == 1",
					"up": "query.block_property('bridge:up') == 1",
					"down": "query.block_property('bridge:down') == 1"
				}
			},
			"minecraft:on_placed": {
				"event": "bridge:on_placed"
			},
			"minecraft:queued_ticking": {
				"on_tick": {
					"event": "bridge:on_tick"
				},
				"looping": true,
				"interval_range": [
					10,
					10
				]
			},
			"minecraft:on_interact": {
				"event": "bridge:on_interact"
			},
			"tag:bridge:cable_connector": {},
			"tag:bridge:powered_cable": {}
		},
		"events": {
			"bridge:unpower": {
				"set_block": {
					"block_type": "bridge:cable"
				}
			},
			"bridge:on_tick": {
				"sequence": [
					{
						"trigger": "bridge:update_connections"
					},
					{
						"trigger": "bridge:transfer_power"
					}
				]
			},
			"bridge:on_placed": {
				"sequence": [
					{
						"randomize": [
							{
								"weight": 3
							},
							{
								"weight": 1,
								"run_command": {
									"command": [
										"/particle bridge:cable_effect ~ ~ ~"
									]
								}
							}
						]
					},
					{
						"trigger": "bridge:update_connections"
					}
				]
			},
			"bridge:update_connections": {
				"sequence": [
					{
						"set_block_property": {
							"bridge:north": "query.block_neighbor_has_any_tag(0, 0, -1, 'bridge:cable_connector')"
						}
					},
					{
						"set_block_property": {
							"bridge:east": "query.block_neighbor_has_any_tag(1, 0, 0, 'bridge:cable_connector')"
						}
					},
					{
						"set_block_property": {
							"bridge:south": "query.block_neighbor_has_any_tag(0, 0, 1, 'bridge:cable_connector')"
						}
					},
					{
						"set_block_property": {
							"bridge:west": "query.block_neighbor_has_any_tag(-1, 0, 0, 'bridge:cable_connector')"
						}
					},
					{
						"set_block_property": {
							"bridge:up": "query.block_neighbor_has_any_tag(0, 1, 0, 'bridge:cable_connector')"
						}
					},
					{
						"set_block_property": {
							"bridge:down": "query.block_neighbor_has_any_tag(0, -1, 0, 'bridge:cable_connector')"
						}
					}
				]
			},
			"bridge:transfer_power": {
				"randomize": [
					{
						"weight": 1,
						"condition": "query.block_neighbor_has_any_tag(0, 0, -1, 'bridge:unpowered')",
						"set_block_at_pos": {
							"block_offset": [
								0,
								0,
								-1
							],
							"block_type": "bridge:powered_cable"
						},
						"trigger": "bridge:unpower"
					},
					{
						"condition": "query.block_neighbor_has_any_tag(1, 0, 0, 'bridge:unpowered')",
						"set_block_at_pos": {
							"block_offset": [
								1,
								0,
								0
							],
							"block_type": "bridge:powered_cable"
						},
						"trigger": "bridge:unpower"
					},
					{
						"condition": "query.block_neighbor_has_any_tag(0, 0, 1, 'bridge:unpowered')",
						"set_block_at_pos": {
							"block_offset": [
								0,
								0,
								1
							],
							"block_type": "bridge:powered_cable"
						},
						"trigger": "bridge:unpower"
					},
					{
						"condition": "query.block_neighbor_has_any_tag(-1, 0, 0, 'bridge:unpowered')",
						"set_block_at_pos": {
							"block_offset": [
								-1,
								0,
								0
							],
							"block_type": "bridge:powered_cable"
						},
						"trigger": "bridge:unpower"
					},
					{
						"condition": "query.block_neighbor_has_any_tag(0, 1, 0, 'bridge:unpowered')",
						"set_block_at_pos": {
							"block_offset": [
								0,
								1,
								0
							],
							"block_type": "bridge:powered_cable"
						},
						"trigger": "bridge:unpower"
					},
					{
						"condition": "query.block_neighbor_has_any_tag(0, -1, 0, 'bridge:unpowered')",
						"set_block_at_pos": {
							"block_offset": [
								0,
								-1,
								0
							],
							"block_type": "bridge:powered_cable"
						},
						"trigger": "bridge:unpower"
					}
				]
			}
		}
	}
}